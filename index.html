<!DOCTYPE>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <style>

      .axis {
        stroke: #000;
        stroke-width: 1.5px;
      }

      circle {
        stroke: #000;
        stroke-width: 0.5px;
      }

      .link {
        fill: none;
        stroke: #999;
        stroke-width: 1.0px;
        stroke-opacity: .3;
      }

      .link.active {
        stroke: red;
        stroke-width: 1.5px;
        stroke-opacity: 1;
      }

      circle.active {
        stroke: red;
        stroke-width: 3px;
      }

    </style>
  </head>

  <body>
  <script src="http://d3js.org/d3.v3.min.js"></script>

  <script>

  var width = 960,
      height = 720;

  var angle = d3.scale.ordinal().domain(d3.range(4)).rangePoints([0, 2 * Math.PI]),
      color = d3.scale.category10().domain(d3.range(20));

  // number of layers
  var layer = 5;  
  var numOfNodes = 60;

  var nodes = [];

  // Add nodes
  for (i=0; i<layer; i++) {

    for (j=0; j<numOfNodes; j++) {

      nodes.push({x: i*200, y: j*7});
    }
  }

  var links = [];

  // Add links
  for (i=0; i<layer-1; i++) {

    var offset = numOfNodes/2;
    var start = i*nodes.length/layer + offset;

    for (j=0; j<numOfNodes; j++) {

      links.push({source: nodes[start], target: nodes[start + j + numOfNodes-offset]});
    }
  }

  var svg = d3.select("body").append("svg")
      .attr("width", width)
      .attr("height", height)
      .append("g")
      .attr("transform", "translate(" + width / 10 + "," + height / 10 + ")");

  var diagonal = d3.svg.diagonal()
    .source(function(d) { return {"x":d.source.y, "y":d.source.x}; })            
    .target(function(d) { return {"x":d.target.y, "y":d.target.x}; })
    .projection(function(d) { return [d.y, d.x]; });

  svg.selectAll(".link")
    .data(links)
    .enter()
    .append("path")
    .attr("class", "link")
    .attr("fill", "none")
    .attr("stroke", "#ADADAD")
    .attr("d", diagonal)
    .on("mouseover", linkMouseover)
       .on("mouseout", mouseout);


  svg.selectAll(".node")
      .data(nodes)
      .enter().append("circle")
      .attr("class", "node")
      .attr("cx", function(d) { return d.x; })
      .attr("cy", function(d) { return d.y; })
      .attr("r", 4)
      .style("fill", function(d) { return color(d.x/50); })
      .on("mouseover", nodeMouseover)
      .on("mouseout", mouseout);

    function linkMouseover(d) {
      svg.selectAll(".link").classed("active", function(p) { return p === d; });
      svg.selectAll(".node circle").classed("active", function(p) { return p === d.source || p === d.target; });
    }

    function nodeMouseover(d) {
      svg.selectAll(".link").classed("active", function(p) { return p.source === d || p.target === d; });
      d3.select(this).classed("active", true);
    }

    function mouseout() {
      svg.selectAll(".active").classed("active", false);
    }

  </script>
  </body>
</html>